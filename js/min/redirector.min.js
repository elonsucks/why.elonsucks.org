(async()=>{let urls={all:function extractURLs(obj){let urls=[];return Array.isArray(obj)?obj.forEach(entry=>{"string"==typeof entry?urls.push(entry):urls.push(...extractURLs(entry))}):obj.url?urls.push(obj.url):Object.values(obj).forEach(val=>urls.push(...extractURLs(val))),urls}(await(await fetch("assets/data/urls.json")).json()),visited:JSON.parse(localStorage.wesoVisitedURLs||"[]")};urls.unvisited=urls.all.filter(url=>!urls.visited.includes(url)),urls.unvisited.length||(urls.unvisited.push(...urls.all),localStorage.wesoVisitedURLs="[]");var randURL=urls.unvisited[Math.floor(Math.random()*urls.unvisited.length)];if(location.search.startsWith("?debug")){let debugOutput=`<pre>Redirect URL (#${urls.unvisited.indexOf(randURL)+1} of ${urls.unvisited.length} unvisited): `+`<a href="${randURL}">${randURL}</a></pre>`;location.search.endsWith("=all")&&(debugOutput+=`<pre>urls.unvisited = ${JSON.stringify(urls.unvisited,null,2).replace(`"${randURL}"`,`<strong style="color: #48b720">"${randURL}"</strong>`)}</pre>`+`<pre>urls.visited = ${JSON.stringify(urls.visited,null,2)}</pre>`),document.write(debugOutput)}else localStorage.wesoVisitedURLs=JSON.stringify([...urls.visited,randURL]),document.location=randURL})();