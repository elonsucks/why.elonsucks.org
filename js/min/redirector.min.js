(async()=>{"use strict";const e=t=>t?Array.isArray(t)?t.flatMap(e=>typeof e=="string"?e:e.url?[e.url]:e(e)):typeof t=="object"?Object.values(t).flatMap(e):[]:[],t=await(await fetch("assets/data/urls.json")).json(),r={all:e(t),visited:JSON.parse(localStorage.visitedURLs||"[]")};r.unvisited=r.all.filter(e=>!r.visited.includes(e)),r.unvisited.length||(r.unvisited=[...r.all],r.visited=[],localStorage.visitedURLs="[]");const o=Math.floor(Math.random()*r.unvisited.length);r.random=r.unvisited[o];if(location.search.startsWith("?debug")){let t=`<pre>Redirect URL (#${o+1} of ${r.unvisited.length} unvisited):\n<strong><a href="${r.random}">${r.random}</a></strong></pre>`;location.search.endsWith("=all")&&["unvisited","visited"].forEach(o=>{t+=`<pre>urls.${o} = ${JSON.stringify(r[o],null,2).replace(/"http/g,(e,t,r)=>(r.slice(0,t).match(/"http/g)||[]).length+1+'. "'+e.slice(1)).replace(new RegExp(`\\d+\\. "${r.random}"`),'<strong style="color:#48b720">$&</strong>')}</pre>`}),document.body.innerHTML=t}else localStorage.visitedURLs=JSON.stringify([...r.visited,r.random]),location.href=r.random})();
